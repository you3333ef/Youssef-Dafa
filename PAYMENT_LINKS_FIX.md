# ๐ ุฅุตูุงุญ ูุดุงุฑูุฉ ุฑูุงุจุท ุงูุฏูุน

## ุงููุดููุฉ ุงูุณุงุจูุฉ โ

ุนูุฏ ุฅูุดุงุก ุฑุงุจุท ุฏูุน ููุดุงุฑูุชู ูุน ุฌูุงุฒ ุขุฎุฑ:
- ุงูุจูุงูุงุช ูู ุชูู ูุงููุฉ
- ุงูุตูุญุงุช ูู ุชุธูุฑ ุจุดูู ุตุญูุญ
- ุงููุจูุบ ูุงูุนููุฉ ูู ูุธูุฑูุง

## ุงูุญู โ

ุชู ุชุทุจูู ูุธุงู ุฑูุงุจุท ูุญุณูู ูุถูู ุนูู ุงูุฑูุงุจุท ุจุดูู ูุงูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ.

---

## ๐ฏ ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1๏ธโฃ ุฑูุงุจุท ูุตูุฑุฉ ูุน ูุนุงููุงุช ูู ุงููุณุงุฑ

**ุงูุตูุบุฉ ุงูุฌุฏูุฏุฉ:**
```
/p/{id}/{company}/{currency}/{amount}
```

**ูุซุงู:**
```
https://your-domain.com/p/abc123/aramex/SAR/500
```

**ุงููุฒุงูุง:**
- โ ุฑุงุจุท ุฃูุตุฑ ูุฃุณูู ูู ุงููุดุงุฑูุฉ
- โ ุฌููุน ุงูุจูุงูุงุช ูู ุงูุฑุงุจุท ููุณู
- โ ูุง ูุนุชูุฏ ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุท
- โ ูุนูู ุญุชู ูู ูุงูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุทูุฆุฉ

### 2๏ธโฃ ุงุณุชุฎุฑุงุฌ ูุญุณูู ููุจูุงูุงุช

ุชู ุชุทุจูู ูุธุงู ุฃููููุงุช ูุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช:

```typescript
// ุงูุฃููููุฉ:
1. ูุนุงููุงุช ุงููุณุงุฑ (Path Parameters)
2. ูุนุงููุงุช ุงูุงุณุชุนูุงู (Query Parameters)  
3. ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database)
4. ุงูููู ุงูุงูุชุฑุงุถูุฉ (Defaults)
```

**ูุซุงู ูู ุงูููุฏ:**
```typescript
const currencyCode = 
  pathCurrency ||              // ูู ุงููุณุงุฑ
  currencyParam ||             // ูู Query
  shippingInfo?.currency_code || // ูู Database
  countryData?.currency ||     // ูู ุจูุงูุงุช ุงูุฏููุฉ
  "SAR";                       // ุงูุชุฑุงุถู
```

### 3๏ธโฃ ุฏุนู ุงูุฎุฏูุงุช ุงูุญููููุฉ

**ููุฎุฏูุงุช ุงูุญููููุฉ:**
```
/p/{id}  โ  ูุชู ุงูุชุญููู ุชููุงุฆููุง ุฅูู  โ  /gov/{provider}/{id}
```

**ูุซุงู:**
```
https://your-domain.com/p/xyz789
โ (ุฅุฐุง ูุงู ุงูุฑุงุจุท ูุณุฏุงุฏ)
https://your-domain.com/gov/sadad/xyz789?provider=sadad&country=SA
```

---

## ๐ฑ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุดุฑูุฉ ุดุญู (ุฃุฑุงููุณ)

**ุฅูุดุงุก ุงูุฑุงุจุท:**
```typescript
generatePaymentLink({
  invoiceId: "abc123",
  company: "aramex",
  country: "SA",
  amount: 500,
  currency: "SAR"
})
```

**ุงูุฑุงุจุท ุงููุงุชุฌ:**
```
https://your-domain.com/p/abc123/aramex/SAR/500
```

**ุนูุฏ ูุชุญู:**
1. ูุณุชุฎุฑุฌ: `company = aramex`, `currency = SAR`, `amount = 500`
2. ูุนุฑุถ ุตูุญุฉ ุฃุฑุงููุณ ูุน ุฌููุน ุงูุจูุงูุงุช
3. ูุทูุจ ุจูุงูุงุช ุงูุนููู
4. ูููู ุนูููุฉ ุงูุฏูุน

### ูุซุงู 2: ุฎุฏูุฉ ุญููููุฉ (ุณุฏุงุฏ)

**ุฅูุดุงุก ุงูุฑุงุจุท:**
```typescript
generatePaymentLink({
  invoiceId: "xyz789",
  company: "sadad",
  country: "SA",
  amount: 1000,
  currency: "SAR"
})
```

**ุงูุฑุงุจุท ุงููุงุชุฌ:**
```
https://your-domain.com/p/xyz789
```

**ุนูุฏ ูุชุญู:**
1. ูุชุญูู ูู ููุน ุงูุฎุฏูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ููุชุดู ุฃููุง ุฎุฏูุฉ ุญููููุฉ (sadad)
3. ูุญููู ุชููุงุฆููุง ุฅูู: `/gov/sadad/xyz789?provider=sadad&country=SA`
4. ูุนุฑุถ ุตูุญุฉ ุณุฏุงุฏ ุงูุฑุณููุฉ
5. ูููู ุนูููุฉ ุงูุฏูุน

### ูุซุงู 3: ุฑุงุจุท ุฏูุน ุนุงู

**ุฅูุดุงุก ุงูุฑุงุจุท:**
```typescript
generatePaymentLink({
  invoiceId: "def456",
  company: "payment",
  country: "AE",
  amount: 750,
  currency: "AED"
})
```

**ุงูุฑุงุจุท ุงููุงุชุฌ:**
```
https://your-domain.com/p/def456/payment/AED/750
```

**ุนูุฏ ูุชุญู:**
1. ูุณุชุฎุฑุฌ: `company = payment`, `currency = AED`, `amount = 750`
2. ูุนุฑุถ ุตูุญุฉ ุฏูุน ุนุงูุฉ
3. ูุทูุจ ุจูุงูุงุช ุงูุนููู
4. ูููู ุนูููุฉ ุงูุฏูุน

---

## ๐ ุงูุชุฏูู ุงููุงูู

### ุงูุชุฏูู ุนูุฏ ุฅูุดุงุก ุงูุฑุงุจุท:

```
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ
   โ
2. ุงูุจูุงูุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   โ
3. ูููุดุฃ ุฑุงุจุท ูุตูุฑ ูุน ุงูุจูุงูุงุช ูู ุงููุณุงุฑ
   โ
4. ูุชู ุนุฑุถ ุงูุฑุงุจุท ูููุณุฎ ูุงููุดุงุฑูุฉ
```

### ุงูุชุฏูู ุนูุฏ ูุชุญ ุงูุฑุงุจุท:

```
1. ุดุฎุต ููุชุญ ุงูุฑุงุจุท: /p/abc123/aramex/SAR/500
   โ
2. ุงูุตูุญุฉ ุชุณุชุฎุฑุฌ ุงูุจูุงูุงุช ูู ุงููุณุงุฑ
   โ
3. ุชุญุงูู ุฌูุจ ุจูุงูุงุช ุฅุถุงููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   โ
4. ุชุฏูุฌ ุงูุจูุงูุงุช (ุงููุณุงุฑ ุฃููููุฉ ุนูู Database)
   โ
5. ุชุนุฑุถ ุตูุญุฉ ุงูุฏูุน ุงููุงููุฉ ูุน ุฌููุน ุงูุจูุงูุงุช
   โ
6. ุงูุนููู ูููู ุนูููุฉ ุงูุฏูุน
```

---

## ๐ก๏ธ ุงูุฃูุงู

### โ ูุง ูู ุขูู:
- ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ (ุงููุจูุบุ ุงูุนููุฉุ ุงูุดุฑูุฉ) ูู ุงูุฑุงุจุท **ุนุงูุฉ**
- ูุฐู ุจูุงูุงุช ูุญุชุงุฌูุง ุงูุนููู ูุฅุชูุงู ุงูุฏูุน
- ูุง ุชูุฌุฏ ูุนูููุงุช ุญุณุงุณุฉ ูู ุงูุฑุงุจุท

### ๐ ูุง ูู ูุญูู:
- ุจูุงูุงุช ุงูุนููู (ุงูุงุณูุ ุงููุงุชูุ ุงูุนููุงู) **ูุง ุชูุญูุธ** ูู ุงูุฑุงุจุท
- ูุชู ุฅุฏุฎุงููุง ููุท ุนูุฏ ูุชุญ ุงูุฑุงุจุท
- ูุชู ุฅุฑุณุงููุง ุจุดูู ุขูู ุนุจุฑ HTTPS

---

## ๐ ุงูููุงุฑูุฉ

| ุงูููุฒุฉ | ูุจู ุงูุฅุตูุงุญ โ | ุจุนุฏ ุงูุฅุตูุงุญ โ |
|--------|----------------|----------------|
| ุทูู ุงูุฑุงุจุท | ุทููู ูุน query params | ูุตูุฑ ูุน path params |
| ุงูุจูุงูุงุช ูู ุงูุฑุงุจุท | ุฌุฒุฆูุฉ | ูุงููุฉ |
| ุงูุงุนุชูุงุฏ ุนูู Database | ููู | ุฌุฒุฆู (fallback) |
| ุงูุณุฑุนุฉ | ุจุทูุก | ุณุฑูุน |
| ุงูุชูุงูููุฉ | ูุดุงูู ุนูุฏ ุงููุดุงุฑูุฉ | ูุนูู ูู ูู ููุงู |
| ุฏุนู ุงูุฎุฏูุงุช ุงูุญููููุฉ | ูุฏูู | ุชููุงุฆู |

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุดุฑูุฉ ุดุญู:

1. **ุฅูุดุงุก ุฑุงุจุท:**
   ```bash
   ุงุฐูุจ ุฅูู: /create/SA/shipping
   ุงุฎุชุฑ: ุฃุฑุงููุณ
   ุฃุฏุฎู: ุฑูู ุชุชุจุน + ูุจูุบ 500
   ุงุถุบุท: ุฅูุดุงุก ุงูุฑุงุจุท
   ```

2. **ุงูุณุฎ ุงูุฑุงุจุท:**
   ```
   https://your-domain.com/p/abc123/aramex/SAR/500
   ```

3. **ุดุงุฑู ุงูุฑุงุจุท:**
   ```bash
   ุฃุฑุณูู ุนุจุฑ WhatsApp ุฃู SMS ุฃู Email
   ```

4. **ุงูุชุญ ูู ุฌูุงุฒ ุขุฎุฑ:**
   ```bash
   ูุฌุจ ุฃู ุชุฑู:
   โ ุดุนุงุฑ ุฃุฑุงููุณ
   โ ุงููุจูุบ: 500 ุฑ.ุณ
   โ ูููุฐุฌ ุจูุงูุงุช ุงูุนููู
   โ ุฒุฑ "ุงููุชุงุจุนุฉ ุฅูู ุงูุฏูุน"
   ```

### ุงุฎุชุจุงุฑ ุฎุฏูุฉ ุญููููุฉ:

1. **ุฅูุดุงุก ุฑุงุจุท:**
   ```bash
   ุงุฐูุจ ุฅูู: /services
   ุงุฎุชุฑ: ุงูุณุนูุฏูุฉ
   ุงุถุบุท: ุณุฏุงุฏ
   ุฃุฏุฎู: ูุจูุบ 1000 + ูุฑุฌุน INV-001
   ุงุถุบุท: ุฅูุดุงุก ุฑุงุจุท ุงูุฏูุน
   ```

2. **ุงูุณุฎ ุงูุฑุงุจุท:**
   ```
   https://your-domain.com/p/xyz789
   ```

3. **ุดุงุฑู ุงูุฑุงุจุท:**
   ```bash
   ุฃุฑุณูู ุนุจุฑ WhatsApp
   ```

4. **ุงูุชุญ ูู ุฌูุงุฒ ุขุฎุฑ:**
   ```bash
   ูุฌุจ ุฃู:
   โ ูุชู ุงูุชุญููู ุชููุงุฆููุง ุฅูู ุตูุญุฉ ุณุฏุงุฏ
   โ Header ุจุฑุชูุงูู ูุน ุดุนุงุฑ ุณุฏุงุฏ
   โ ุงููุจูุบ: 1000 ุฑ.ุณ
   โ ุงููุฑุฌุน: INV-001
   โ ูููุฐุฌ ุจูุงูุงุช ุงูุนููู
   ```

---

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

### 1. `src/utils/paymentLinks.ts`
**ุงูุชุบููุฑ:** ุชุญุฏูุซ ุฏุงูุฉ `generatePaymentLink` ูุฏุนู:
- ูุนุงููุงุช ุงููุณุงุฑ (Path Parameters)
- ุชูุฑูุฑ ุงููุจูุบ ูุงูุนููุฉ
- ุงูุชุญููู ุงูุชููุงุฆู ููุฎุฏูุงุช ุงูุญููููุฉ

### 2. `src/pages/PaymentRecipient.tsx`
**ุงูุชุบููุฑ:** ุงุณุชุฎุฑุงุฌ ูุญุณูู ููุจูุงูุงุช:
- ุฃููููุฉ ูููุณุงุฑ ุนูู Query ุนูู Database
- ุฏุนู ุฌููุน ุงูุตูุบ ุงููุฏููุฉ (backward compatible)
- ุงูุชุญููู ุงูุชููุงุฆู ููุฎุฏูุงุช ุงูุญููููุฉ

### 3. `src/pages/CreateShippingLink.tsx`
**ุงูุชุบููุฑ:** ุชูุฑูุฑ ุงููุจูุบ ูุงูุนููุฉ ุนูุฏ ุชูููุฏ ุงูุฑุงุจุท

### 4. `src/pages/CreatePaymentLink.tsx`
**ุงูุชุบููุฑ:** ุชูุฑูุฑ ุงููุจูุบ ูุงูุนููุฉ ุนูุฏ ุชูููุฏ ุงูุฑุงุจุท

### 5. `src/pages/GovernmentPaymentPage.tsx`
**ุงูุชุบููุฑ:** ุฏุนู ุงุณุชุฎุฑุงุฌ ุงููุนุงููุงุช ูู ุงููุณุงุฑ

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### ูุง ุชู ุฅุตูุงุญู:

โ **ุงูุฑูุงุจุท ุชุนูู ุจุดูู ูุงูู ุนูุฏ ุงููุดุงุฑูุฉ**
- ุฌููุน ุงูุจูุงูุงุช ููุฌูุฏุฉ ูู ุงูุฑุงุจุท
- ูุง ุชุนุชูุฏ ููุท ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุณุฑูุนุฉ ูู ุงูุชุญููู

โ **ุฏุนู ุฌููุน ุฃููุงุน ุงูุฎุฏูุงุช**
- ุดุฑูุงุช ุงูุดุญู (ุฃุฑุงููุณุ DHLุ ุงูุฎ)
- ุงูุฎุฏูุงุช ุงูุญููููุฉ (ุณุฏุงุฏุ ูู ูุชุ ุงูุฎ)
- ุฑูุงุจุท ุงูุฏูุน ุงูุนุงูุฉ

โ **ุชุฌุฑุจุฉ ูุชุณูุฉ ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ**
- Mobile โ
- Tablet โ
- Desktop โ

โ **Backward Compatible**
- ุงูุฑูุงุจุท ุงููุฏููุฉ ูุง ุชุฒุงู ุชุนูู
- ูุง ููุฌุฏ breaking changes
- ุฏุนู ุตูุบ ูุชุนุฏุฏุฉ ููุฑูุงุจุท

---

## ๐ ุงููุณุงุนุฏุฉ

### ูุดููุฉ: ุงูุฑุงุจุท ูุง ูุนูู

**ุงูุณุจุจ ุงููุญุชูู:**
- ุงูุฑุงุจุท ุบูุฑ ููุชูู
- ุงูุจูุงูุงุช ูุงูุตุฉ

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู ุงูุฑุงุจุท ุจุตูุบุฉ: `/p/{id}/{company}/{currency}/{amount}`
2. ุชุญูู ูู ูุฌูุฏ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุงูุชุญ Console ูุงุทูุน ุนูู ุงูุฃุฎุทุงุก

### ูุดููุฉ: ุงูุจูุงูุงุช ูุง ุชุธูุฑ

**ุงูุณุจุจ ุงููุญุชูู:**
- ูุดููุฉ ูู ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ูู ุงููุณุงุฑ

**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงููุณุงุฑ ุตุญูุญ
2. ุฑุงุฌุน Console logs
3. ุชุฃูุฏ ูู ุฃู ุงูุจูุงูุงุช ูุญููุธุฉ ูู Database

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ูุธุงู ูุดุงุฑูุฉ ุฑูุงุจุท ุงูุฏูุน ุจุดูู ูุงูู:

โ ุฑูุงุจุท ูุตูุฑุฉ ูุณููุฉ  
โ ุจูุงูุงุช ูุงููุฉ ูู ุงูุฑุงุจุท  
โ ุนูู ููุฑู ุจุฏูู ุงูุชุธุงุฑ Database  
โ ุฏุนู ุฌููุน ุงูุฎุฏูุงุช  
โ Backward compatible  
โ ุชุฌุฑุจุฉ ูุชุณูุฉ  

**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุฅูุชุงุฌ

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 13 ุฏูุณูุจุฑ 2024  
**ุงููุทูุฑ:** Capy AI  
**ุงูุจุฑูุด:** capy/cap-1-756ade26
