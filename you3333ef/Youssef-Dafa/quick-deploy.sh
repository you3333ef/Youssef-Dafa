#!/bin/bash

# ๐ ุณูุฑูุจุช ูุดุฑ ุณุฑูุน ุนูู Netlify
# ูููู ุชุดุบููู ูุฏููุงู ุฅุฐุง ูุดู ุงููุดุฑ ุงูุชููุงุฆู

echo "๐ง ุจุฏุก ุนูููุฉ ุงููุดุฑ..."

# 1. ุชูุธูู ุงููุฌูุฏุงุช ุงููุฏููุฉ
echo "๐งน ุชูุธูู ุงููููุงุช ุงููุฏููุฉ..."
rm -rf node_modules/.cache dist

# 2. ุงูุชุซุจูุช ุงููุธูู
echo "๐ฆ ุชุซุจูุช ุงูููุชุจุงุช..."
npm ci --legacy-peer-deps

# 3. ุงูุจูุงุก
echo "๐จ ุจูุงุก ุงููุดุฑูุน..."
npm run build

# 4. ุงูุชุญูู ูู ุงููุฌุงุญ
if [ -d "dist" ]; then
    echo "โ ุงูุจูุงุก ูุฌุญ!"
    echo "๐ ูุญุชููุงุช dist:"
    ls -lh dist/ | head -10
    
    echo ""
    echo "๐ ุงูุขู ููููู:"
    echo "  1. ุฑูุน ุงูุชุบููุฑุงุช: git push origin capy/cap-1-21946017"
    echo "  2. ุฃู ุงููุดุฑ ูุฏููุงู: netlify deploy --prod --dir=dist"
    echo "  3. ุฃู ุฑูุน dist ูู Netlify Dashboard"
else
    echo "โ ุงูุจูุงุก ูุดู!"
    echo "ุฑุงุฌุน ุงูุฃุฎุทุงุก ุฃุนูุงู"
    exit 1
fi
